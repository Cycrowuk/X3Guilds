<?xml version="1.0" encoding="utf-8" ?>
<?xml-stylesheet href="director.xsl" type="text/xsl" ?>
<director name="Celestial Navigators" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="director.xsd">
	<documentation>
		<author name="Cycrow" />
		<content reference="Celestial Navigators" name="guilds" description="Celestial Navigators Guild"/>
		<version number="0.1" date="05/12/2023" />
	</documentation>
	<cues>		
		<cue name="Celestial Navigators" comment="Main Celestial Navigators Guild missions">
			<condition>
				<cue_is_complete cue="Guilds_Startup"/>
			</condition>
			<cues>	
				<!-- ######################## Radiant Missions ########################## -->
				<cue name="Taxi_Radiant" comment="Radiant Missions">					
					<condition>
						<check_all>
							<check_value value="{value@Celestial Navigators.Joined}" exact="1"/>
							<check_value value="{object.exists@{value@Celestial Navigators.GuildHQ}}" exact="1"/>
						</check_all>			
					</condition>					
					<timing>
						<time min="30m" max="60m"/>
					</timing>
					<action>
						<do_all>
							<do_any>
								<set_value name="Taxi_Radiant.Mission" exact="1" chance="40"/>
								<set_value name="Taxi_Radiant.Mission" exact="2" chance="30"/>
								<set_value name="Taxi_Radiant.Mission" exact="3" chance="20"/>
								<set_value name="Taxi_Radiant.Mission" exact="4" chance="10"/>								
							</do_any>
						</do_all>
					</action>
					<cues>
						<cue name="Taxi_Radiant_HQCheck" comment="Check if HQ still exists">
							<condition>
								<object_destroyed object="{value@Celestial Navigators.GuildHQ}"/>
							</condition>
							<action>
								<do_all>
									<reset_cue cue="Taxi_Radiant"/>								
								</do_all>
							</action>
						</cue>

						<cue name="Taxi_Radiant_Mission_1">
							<condition>
								<check_value value="{value@Taxi_Radiant.Mission}" exact="1"/>
							</condition>
							<timing>
								<time exact="30s"/>
							</timing>
							<action>
								<do_all>
									<do_any>
										<create_actor name="Taxi_Radiant_Mission_1.MissionGiver" race="{lookup.race@argon}" voiceflags="32" location="crew" object="{value@Celestial Navigators.GuildHQ}" chance="30"/>
										<create_actor name="Taxi_Radiant_Mission_1.MissionGiver" race="{lookup.race@boron}" voiceflags="32" location="crew" object="{value@Celestial Navigators.GuildHQ}" chance="10"/>
										<create_actor name="Taxi_Radiant_Mission_1.MissionGiver" race="{lookup.race@split}" voiceflags="32" location="crew" object="{value@Celestial Navigators.GuildHQ}" chance="30"/>
										<create_actor name="Taxi_Radiant_Mission_1.MissionGiver" race="{lookup.race@paranid}" voiceflags="32" location="crew" object="{value@Celestial Navigators.GuildHQ}" chance="20"/>
										<create_actor name="Taxi_Radiant_Mission_1.MissionGiver" race="{lookup.race@teladi}" voiceflags="32" location="crew" object="{value@Celestial Navigators.GuildHQ}" chance="10"/>
									</do_any>
									<do_any>
										<set_value name="Taxi_Radiant_Mission_1.Difficulty" exact="{lookup.level@average}" chance="30"/>
										<set_value name="Taxi_Radiant_Mission_1.Difficulty" exact="{lookup.level@hard}" chance="70" />
									</do_any>
									<set_value name="Taxi_Radiant_Mission_1.RewardCr" min="200000" max="250000"/>
									<set_value name="Taxi_Radiant_Mission_1.RewardCr" operation="multiply" exact="{value@Taxi_Radiant_Mission_1.Difficulty}"/>
									<create_offer actor="Taxi_Radiant_Mission_1.MissionGiver" conversation="L2OfferRide" discipline="XXXT" cue="Taxi_Radiant_Mission_1"/>
									<do_any>
										<set_value name="Taxi_Radiant_Mission_1.EnemyRace" exact="{lookup.race.randomenemy@{actor.race@Taxi_Radiant_Mission_1.MissionGiver}}" chance="35"/>
										<set_value name="Taxi_Radiant_Mission_1.EnemyRace" exact="0" chance="65"/>
									</do_any>
									<do_any>
										<set_value name="Taxi_Radiant_Mission_1.MisType" min="101101" max="{9620,101100}" chance="100-({value@Taxi_Radiant_Mission_1.Difficulty}*10)"/>
										<set_value name="Taxi_Radiant_Mission_1.MisType" min="101301" max="{9620,101300}" chance="{value@Taxi_Radiant_Mission_1.Difficulty}*10"/>
									</do_any>
									<do_if value="{value@Taxi_Radiant_Mission_1.MisType}" min="101301">
										<set_value name="Taxi_Radiant_Mission_1.NeedTP" exact="1" />
									</do_if>
								</do_all>
							</action>
							<cues>
								<cue name="Taxi_Radiant_1_Breifing">
									<condition>
										<check_any>
											<conversation_completed answer="briefing" conversation="L2OfferRide" actor="Taxi_Radiant_Mission_1.MissionGiver"/>
										</check_any>
									</condition>
									<cues>
										<cue ref="L0GI03 B" version="1">
											<params>
												<param name="Cue" value="Taxi_Radiant_Mission_1"/>
												<param name="ID" value="1"/>
												<param name="EnemyRace" value="{value@Taxi_Radiant_Mission_1.EnemyRace}"/>
												<param name="OfferRace" value="{actor.race@Taxi_Radiant_Mission_1.MissionGiver}"/>
												<param name="DestRace" value="{actor.race@Taxi_Radiant_Mission_1.MissionGiver}"/>
												<param name="Lv1Guide" value="{actor@Taxi_Radiant_Mission_1.MissionGiver}"/>
												<param name="PageID" value="9620"/>
												<param name="TextID" value="{value@Taxi_Radiant_Mission_1.MisType}"/>
												<param name="Difficulty" value="{value@Taxi_Radiant_Mission_1.Difficulty}"/>
												<param name="RewardCr" value="Taxi_Radiant_Mission_1.RewardCr"/>
												<param name="StartObject" value="{value@Celestial Navigators.GuildHQ}"/>
												<param name="HideDest" value="0"/>
												<param name="RoundReward" value="1"/>
												<param name="TPNeeded" value="{value@Taxi_Radiant_Mission_1.NeedTP}"/>
											</params>
										</cue>
										<cue name="Taxi_Radiant_1_UpdateBreifing">
											<condition>
												<cue_completed cue="L0GI03 B"/>
											</condition>
											<action>
												<do_all>
													<create_briefing cue="Taxi_Radiant_Mission_1" background="taxi_hq.tga" race="{9620,304}" targetrace="{9620,304}" story="{9620,304}">
														<thumbnails>
															<thumbnail image="taxi.tga" order="1"/>
														</thumbnails>
													</create_briefing>
												</do_all>
											</action>
										</cue>
									</cues>
								</cue>
								<cue name="Taxi_Radiant_1_Accept">
									<condition>
										<check_any>
											<conversation_completed answer="accept" conversation="L2OfferRide" actor="Taxi_Radiant_Mission_1.MissionGiver"/>
										</check_any>
									</condition>
									<timing>
										<time min="250" max="350"/>
									</timing>
									<action>
										<do_all>
											<remove_offer actor="Taxi_Radiant_Mission_1.MissionGiver" conversation="L2OfferRide" discipline="XXXT"/>
											<increment_statistic statistic="7000"/>
										</do_all>
									</action>
									<cues>
										<cue ref="L0GI03" comment="Mission 0.1">
											<params>
												<param name="Cue" value="Taxi_Radiant_Mission_1"/>
												<param name="ID" value="1"/>
												<param name="EnemyRace" value="{value@Taxi_Radiant_Mission_1.EnemyRace}"/>
												<param name="OfferRace" value="{actor.race@Taxi_Radiant_Mission_1.MissionGiver}"/>
												<param name="DestRace" value="{actor.race@Taxi_Radiant_Mission_1.MissionGiver}"/>
												<param name="Lv1Guide" value="{actor@Taxi_Radiant_Mission_1.MissionGiver}"/>
												<param name="PageID" value="9620"/>
												<param name="TextID" value="101101"/>
												<param name="Difficulty" value="{value@Taxi_Radiant_Mission_1.Difficulty}"/>
												<param name="RewardCr" value="Taxi_Radiant_Mission_1.RewardCr"/>
												<param name="StartObject" value="{value@Celestial Navigators.GuildHQ}"/>
												<param name="HideDest" value="0"/>
												<param name="RoundReward" value="1"/>
												<param name="TPNeeded" value="{value@Taxi_Radiant_Mission_1.NeedTP}"/>
											</params>
										</cue>
										<cue name="Taxi_Radiant_Mission_1 End" delay="1s">
											<condition>
												<check_value value="{value@Taxi_Radiant_Mission_1.1 L0GI03 Progress}" min="1"/>
											</condition>
											<timing>
												<time min="1s" max="3s"/>
											</timing>
											<action>
												<do_all>
													<remove_briefing cue="Taxi_Radiant_Mission_1"/>
													<do_choose>
														<do_when value="{value@Taxi_Radiant_Mission_1.1 L0GI03 Progress}" exact="1">
															<remove_objective cue="Taxi_Radiant_Mission_1" status="complete"/>
															<reward_player>
																<money exact="{value@Taxi_Radiant_Mission_1.RewardCr}" transactionpage="9620" transactionid="100036"/>
															</reward_player>
															<increment_statistic statistic="7010"/>
															<show_help text="{9620,100037}"/>
															<start_script script="plugin.guilds.doexp">
																<scriptargs>
																	<scriptvalue datatype="integer" datavalue="{value@Taxi_Radiant_Mission_1.Difficulty}*150"/>
																	<scriptvalue datatype="string" datavalue="taxi"/>
																	<scriptvalue datatype="integer" datavalue="2000"/>
																</scriptargs>
															</start_script>
														</do_when>
														<do_when value="{value@Taxi_Radiant_Mission_1.1 L0GI03 Progress}" exact="2" comment="Time ran out">
															<remove_objective cue="Taxi_Radiant_Mission_1" status="failed"/>
														</do_when>
														<do_when value="{value@Taxi_Radiant_Mission_1.1 L0GI03 Progress}" exact="3" comment="Destroyed by someone else">
															<start_script script="plugin.guilds.doexp">
																<scriptargs>
																	<scriptvalue datatype="integer" datavalue="-200"/>
																	<scriptvalue datatype="string" datavalue="taxi"/>
																	<scriptvalue datatype="integer" datavalue="2000"/>
																</scriptargs>
															</start_script>
															<remove_objective cue="Taxi_Radiant_Mission_1" status="failed"/>
														</do_when>
														<do_when value="{value@Taxi_Radiant_Mission_1.1 L0GI03 Progress}" exact="5" comment="Ejected passenger">
															<remove_objective cue="Taxi_Radiant_Mission_1" status="failed"/>
														</do_when>
														<do_when value="{value@Taxi_Radiant_Mission_1.1 L0GI03 Progress}" exact="92" comment="Too late">
															<remove_objective cue="Taxi_Radiant_Mission_1" status="aborted"/>
														</do_when>
														<do_when value="{value@Taxi_Radiant_Mission_1.1 L0GI03 Progress}" exact="93" comment="Too late (dest destroyed)">
															<remove_objective cue="Taxi_Radiant_Mission_1" status="aborted"/>
														</do_when>
														<do_otherwise comment="Must be 99, Aborted?">
															<remove_objective cue="Taxi_Radiant_Mission_1" status="aborted"/>
														</do_otherwise>
													</do_choose>
												</do_all>
											</action>
											<cues>
												<cue name="Taxi_Radiant_Mission_1 End Wait">
													<condition>
														<cue_completed cue="Taxi_Radiant_Mission_1 End"/>
													</condition>
													<cues>
														<cue ref="Taxi_Radiant_Mission_1 Final Message">
															<params>
																<param name="Cue" value="Taxi_Radiant_Mission_1"/>
																<param name="ID" value="1"/>
															</params>
														</cue>
													</cues>
												</cue>
											</cues>
										</cue>
										<cue name="Taxi_Radiant_Mission_1 Final Message" library="1" version="2">
											<action>
												<do_all>
													<destroy_actor actor="Taxi_Radiant_Mission_1.MissionGiver"/>
													<set_value name="Taxi_Radiant.Mission" exact="100"/>
												</do_all>
											</action>
										</cue>
									</cues>
								</cue>
							</cues>
						</cue>

						<cue name="Taxi_Radiant_Mission_2">
							<condition>
								<check_value value="{value@Taxi_Radiant.Mission}" exact="2"/>
							</condition>
							<timing>
								<time exact="30s"/>
							</timing>
							<action>
								<do_all>
									<do_any>
										<create_actor name="Taxi_Radiant_Mission_2.MissionGiver" race="{lookup.race@argon}" voiceflags="32" location="crew" object="{value@Celestial Navigators.GuildHQ}" chance="30"/>
										<create_actor name="Taxi_Radiant_Mission_2.MissionGiver" race="{lookup.race@boron}" voiceflags="32" location="crew" object="{value@Celestial Navigators.GuildHQ}" chance="10"/>
										<create_actor name="Taxi_Radiant_Mission_2.MissionGiver" race="{lookup.race@split}" voiceflags="32" location="crew" object="{value@Celestial Navigators.GuildHQ}" chance="30"/>
										<create_actor name="Taxi_Radiant_Mission_2.MissionGiver" race="{lookup.race@paranid}" voiceflags="32" location="crew" object="{value@Celestial Navigators.GuildHQ}" chance="20"/>
										<create_actor name="Taxi_Radiant_Mission_2.MissionGiver" race="{lookup.race@teladi}" voiceflags="32" location="crew" object="{value@Celestial Navigators.GuildHQ}" chance="10"/>
									</do_any>
									<do_any>
										<set_value name="Taxi_Radiant_Mission_2.Difficulty" exact="{lookup.level@average}" chance="30"/>
										<set_value name="Taxi_Radiant_Mission_2.Difficulty" exact="{lookup.level@hard}" chance="70" />
									</do_any>
									<set_value name="Taxi_Radiant_Mission_2.RewardCr" min="({player.traderank.rank}+1)*{value@Taxi_Radiant_Mission_2.Difficulty}*70000" max="({player.traderank.rank}+1)*{value@Taxi_Radiant_Mission_2.Difficulty}*90000"/>
									<create_offer actor="Taxi_Radiant_Mission_2.MissionGiver" conversation="L2OfferRideHard" discipline="XXXT" cue="Taxi_Radiant_Mission_2"/>
									<set_value name="Taxi_Radiant_Mission_2.EnemyRace" exact="{lookup.race@xenon} "/>
									<set_value name="Taxi_Radiant_Mission_2.MisType" min="101201" max="{9620,101200}"/>
									<set_value name="Taxi_Radiant_Mission_2.NeedTP" exact="0" />
								</do_all>
							</action>
							<cues>
								<cue name="Taxi_Radiant_2_Breifing">
									<condition>
										<check_any>
											<conversation_completed answer="briefing" conversation="L2OfferRideHard" actor="Taxi_Radiant_Mission_2.MissionGiver"/>
										</check_any>
									</condition>
									<cues>
										<cue ref="L0GI03 B" version="1">
											<params>
												<param name="Cue" value="Taxi_Radiant_Mission_2"/>
												<param name="ID" value="1"/>
												<param name="EnemyRace" value="{value@Taxi_Radiant_Mission_2.EnemyRace}"/>
												<param name="OfferRace" value="{actor.race@Taxi_Radiant_Mission_2.MissionGiver}"/>
												<param name="DestRace" value="{actor.race@Taxi_Radiant_Mission_2.MissionGiver}"/>
												<param name="Lv1Guide" value="{actor@Taxi_Radiant_Mission_2.MissionGiver}"/>
												<param name="PageID" value="9620"/>
												<param name="TextID" value="{value@Taxi_Radiant_Mission_2.MisType}"/>
												<param name="Difficulty" value="{value@Taxi_Radiant_Mission_2.Difficulty}"/>
												<param name="RewardCr" value="Taxi_Radiant_Mission_2.RewardCr"/>
												<param name="StartObject" value="{value@Celestial Navigators.GuildHQ}"/>
												<param name="HideDest" value="0"/>
												<param name="RoundReward" value="1"/>
												<param name="TPNeeded" value="{value@Taxi_Radiant_Mission_2.NeedTP}"/>
												<param name="HasXenon" value="1"/>
											</params>
										</cue>
										<cue name="Taxi_Radiant_2_UpdateBreifing">
											<condition>
												<cue_completed cue="L0GI03 B"/>
											</condition>
											<action>
												<do_all>
													<create_briefing cue="Taxi_Radiant_Mission_2" background="taxi_hq.tga" race="{9620,304}" targetrace="{lookup.race@xenon}" story="{9620,304}">
														<thumbnails>
															<thumbnail image="taxi.tga" order="1"/>
														</thumbnails>
													</create_briefing>
												</do_all>
											</action>
										</cue>
									</cues>
								</cue>
								<cue name="Taxi_Radiant_2_Accept">
									<condition>
										<check_any>
											<conversation_completed answer="accept" conversation="L2OfferRideHard" actor="Taxi_Radiant_Mission_2.MissionGiver"/>
										</check_any>
									</condition>
									<timing>
										<time min="250" max="350"/>
									</timing>
									<action>
										<do_all>
											<remove_offer actor="Taxi_Radiant_Mission_2.MissionGiver" conversation="L2OfferRideHard" discipline="XXXT"/>
											<increment_statistic statistic="7000"/>
										</do_all>
									</action>
									<cues>
										<cue ref="L0GI03" comment="Mission 0.1">
											<params>
												<param name="Cue" value="Taxi_Radiant_Mission_2"/>
												<param name="ID" value="1"/>
												<param name="EnemyRace" value="{value@Taxi_Radiant_Mission_2.EnemyRace}"/>
												<param name="OfferRace" value="{actor.race@Taxi_Radiant_Mission_2.MissionGiver}"/>
												<param name="DestRace" value="{actor.race@Taxi_Radiant_Mission_2.MissionGiver}"/>
												<param name="Lv1Guide" value="{actor@Taxi_Radiant_Mission_2.MissionGiver}"/>
												<param name="PageID" value="9620"/>
												<param name="TextID" value="{value@Taxi_Radiant_Mission_2.MisType}"/>
												<param name="Difficulty" value="{value@Taxi_Radiant_Mission_2.Difficulty}"/>
												<param name="RewardCr" value="Taxi_Radiant_Mission_2.RewardCr"/>
												<param name="StartObject" value="{value@Celestial Navigators.GuildHQ}"/>
												<param name="HideDest" value="0"/>
												<param name="RoundReward" value="1"/>
												<param name="HasXenon" value="1"/>
												<param name="TPNeeded" value="{value@Taxi_Radiant_Mission_2.NeedTP}"/>
											</params>
										</cue>
										<cue name="Taxi_Radiant_Mission_2 End" delay="1s">
											<condition>
												<check_value value="{value@Taxi_Radiant_Mission_2.1 L0GI03 Progress}" min="1"/>
											</condition>
											<timing>
												<time min="1s" max="3s"/>
											</timing>
											<action>
												<do_all>
													<remove_briefing cue="Taxi_Radiant_Mission_2"/>
													<do_choose>
														<do_when value="{value@Taxi_Radiant_Mission_2.1 L0GI03 Progress}" exact="1">
															<remove_objective cue="Taxi_Radiant_Mission_2" status="complete"/>
															<reward_player>
																<money exact="{value@Taxi_Radiant_Mission_2.RewardCr}" transactionpage="9620" transactionid="100036"/>
															</reward_player>
															<increment_statistic statistic="7010"/>
															<show_help text="{9620,100037}"/>
															<start_script script="plugin.guilds.doexp">
																<scriptargs>
																	<scriptvalue datatype="integer" datavalue="{value@Taxi_Radiant_Mission_2.Difficulty}*200"/>
																	<scriptvalue datatype="string" datavalue="taxi"/>
																	<scriptvalue datatype="integer" datavalue="2000"/>
																</scriptargs>
															</start_script>
														</do_when>
														<do_when value="{value@Taxi_Radiant_Mission_2.1 L0GI03 Progress}" exact="2" comment="Time ran out">
															<remove_objective cue="Taxi_Radiant_Mission_2" status="failed"/>
														</do_when>
														<do_when value="{value@Taxi_Radiant_Mission_2.1 L0GI03 Progress}" exact="3" comment="Destroyed by someone else">
															<start_script script="plugin.guilds.doexp">
																<scriptargs>
																	<scriptvalue datatype="integer" datavalue="-200"/>
																	<scriptvalue datatype="string" datavalue="taxi"/>
																	<scriptvalue datatype="integer" datavalue="2000"/>
																</scriptargs>
															</start_script>
															<remove_objective cue="Taxi_Radiant_Mission_2" status="failed"/>
														</do_when>
														<do_when value="{value@Taxi_Radiant_Mission_2.1 L0GI03 Progress}" exact="5" comment="Ejected passenger">
															<remove_objective cue="Taxi_Radiant_Mission_2" status="failed"/>
														</do_when>
														<do_when value="{value@Taxi_Radiant_Mission_2.1 L0GI03 Progress}" exact="92" comment="Too late">
															<remove_objective cue="Taxi_Radiant_Mission_2" status="aborted"/>
														</do_when>
														<do_when value="{value@Taxi_Radiant_Mission_2.1 L0GI03 Progress}" exact="93" comment="Too late (dest destroyed)">
															<remove_objective cue="Taxi_Radiant_Mission_2" status="aborted"/>
														</do_when>
														<do_otherwise comment="Must be 99, Aborted?">
															<remove_objective cue="Taxi_Radiant_Mission_2" status="aborted"/>
														</do_otherwise>
													</do_choose>
												</do_all>
											</action>
											<cues>
												<cue name="Taxi_Radiant_Mission_2 End Wait">
													<condition>
														<cue_completed cue="Taxi_Radiant_Mission_2 End"/>
													</condition>
													<cues>
														<cue ref="Taxi_Radiant_Mission_2 Final Message">
															<params>
																<param name="Cue" value="Taxi_Radiant_Mission_2"/>
																<param name="ID" value="1"/>
															</params>
														</cue>
													</cues>
												</cue>
											</cues>
										</cue>
										<cue name="Taxi_Radiant_Mission_2 Final Message" library="1" version="2">
											<action>
												<do_all>
													<destroy_actor actor="Taxi_Radiant_Mission_2.MissionGiver"/>
													<set_value name="Taxi_Radiant.Mission" exact="100"/>
												</do_all>
											</action>
										</cue>
									</cues>
								</cue>
							</cues>
						</cue>

						<cue name="Taxi_Radiant_Mission_3">
							<condition>
								<check_value value="{value@Taxi_Radiant.Mission}" exact="3"/>
							</condition>
							<timing>
								<time exact="30s"/>
							</timing>
							<action>
								<do_all>
									<do_any>
										<create_actor name="Taxi_Radiant_Mission_3.MissionGiver" race="{lookup.race@argon}" voiceflags="32" location="crew" object="{value@Celestial Navigators.GuildHQ}" chance="30"/>
										<create_actor name="Taxi_Radiant_Mission_3.MissionGiver" race="{lookup.race@boron}" voiceflags="32" location="crew" object="{value@Celestial Navigators.GuildHQ}" chance="10"/>
										<create_actor name="Taxi_Radiant_Mission_3.MissionGiver" race="{lookup.race@split}" voiceflags="32" location="crew" object="{value@Celestial Navigators.GuildHQ}" chance="30"/>
										<create_actor name="Taxi_Radiant_Mission_3.MissionGiver" race="{lookup.race@paranid}" voiceflags="32" location="crew" object="{value@Celestial Navigators.GuildHQ}" chance="20"/>
										<create_actor name="Taxi_Radiant_Mission_3.MissionGiver" race="{lookup.race@teladi}" voiceflags="32" location="crew" object="{value@Celestial Navigators.GuildHQ}" chance="10"/>
									</do_any>
									<set_value name="Taxi_Radiant_Mission_3.TimeOut" min="{player.age}+600" max="{player.age}+1200"/>
									<!--set notoriety gain-->
									<set_value name="Taxi_Radiant_Mission_3.Difficulty" min="{lookup.level@veryeasy}" max="{lookup.level@veryhard}" profile="bell"/>
									<do_any>
										<set_value name="Taxi_Radiant_Mission_3.MisType" min="101" max="{3303,100}" chance="100-({value@Taxi_Radiant_Mission_3.Difficulty}*10)"/>
										<set_value name="Taxi_Radiant_Mission_3.MisType" min="201" max="{3303,200}" chance="{value@Taxi_Radiant_Mission_3.Difficulty}*10"/>
									</do_any>
									<set_value name="Taxi_Radiant_Mission_3.TPNeeded" exact="0"/>
									<do_if value="{value@Taxi_Radiant_Mission_3.MisType}" min="200">
										<set_value name="Taxi_Radiant_Mission_3.TPNeeded" exact="100"/>
									</do_if>
									<set_value name="Taxi_Radiant_Mission_3.RewardCr" min="100000" max="175000"/>
									<set_value name="Taxi_Radiant_Mission_3.RewardCr" operation="multiply" exact="{value@Taxi_Radiant_Mission_3.Difficulty}"/>
									<create_offer actor="Taxi_Radiant_Mission_3.MissionGiver" conversation="L2OfferRide" discipline="XXXT" cue="Taxi_Radiant_Mission_3"/>
									<do_any>
										<set_value name="Taxi_Radiant_Mission_3.EnemyRace" exact="{lookup.race.randomenemy@{actor.race@Taxi_Radiant_Mission_3.MissionGiver}}" chance="35"/>
										<set_value name="Taxi_Radiant_Mission_3.EnemyRace" exact="0" chance="65"/>
									</do_any>
								</do_all>
							</action>
							<cues>
								<cue name="Taxi_Radiant_3_Breifing">
									<condition>
										<check_any>
											<conversation_completed answer="briefing" conversation="L2OfferRide" actor="Taxi_Radiant_Mission_3.MissionGiver"/>
										</check_any>
									</condition>
									<cues>
										<cue ref="L0M03 B">
											<params>
												<param name="Cue" value="Taxi_Radiant_Mission_3"/>
												<param name="ID" value="1"/>
												<param name="EnemyRace" value="{value@Taxi_Radiant_Mission_3.EnemyRace}"/>
												<param name="OfferRace" value="{actor.race@Taxi_Radiant_Mission_3.MissionGiver}"/>
												<param name="DestRace" value="{actor.race@Taxi_Radiant_Mission_3.MissionGiver}"/>
												<param name="Lv1Guide" value="{actor@Taxi_Radiant_Mission_3.MissionGiver}"/>
												<param name="PageID" value="3303"/>
												<param name="TextID" value="{value@Taxi_Radiant_Mission_3.MisType}"/>
												<param name="Difficulty" value="{value@Taxi_Radiant_Mission_3.Difficulty}"/>
												<param name="RewardCr" value="Taxi_Radiant_Mission_3.RewardCr"/>
												<param name="StartObject" value="{value@Celestial Navigators.GuildHQ}"/>
												<param name="HideDest" value="0"/>
												<param name="RoundReward" value="1"/>
												<param name="HasXenon" value="1"/>
												<param name="TPNeeded" value="{value@Taxi_Radiant_Mission_3.NeedTP}"/>
											</params>
										</cue>
										<cue name="Taxi_Radiant_3_UpdateBreifing">
											<condition>
												<cue_completed cue="L0M03 B"/>
											</condition>
											<action>
												<do_all>
													<create_briefing cue="Taxi_Radiant_Mission_3" background="taxi_hq.tga" race="{9620,304}" targetrace="{9620,304}" story="{9620,304}">
														<thumbnails>
															<thumbnail image="taxi.tga" order="1"/>
														</thumbnails>
													</create_briefing>
												</do_all>
											</action>
										</cue>
									</cues>
								</cue>
								<cue name="Taxi_Radiant_3_Accept">
									<condition>
										<check_any>
											<conversation_completed answer="accept" conversation="L2OfferRide" actor="Taxi_Radiant_Mission_3.MissionGiver"/>
										</check_any>
									</condition>
									<timing>
										<time min="250" max="350"/>
									</timing>
									<action>
										<do_all>
											<remove_offer actor="Taxi_Radiant_Mission_3.MissionGiver" conversation="L2OfferRide" discipline="XXXT"/>
											<increment_statistic statistic="7000"/>
										</do_all>
									</action>
									<cues>
										<cue ref="L0M03" comment="Mission 0.3">
											<params>
												<param name="Cue" value="Taxi_Radiant_Mission_3"/>
												<param name="ID" value="1"/>
												<param name="EnemyRace" value="{value@Taxi_Radiant_Mission_3.EnemyRace}"/>
												<param name="OfferRace" value="{actor.race@Taxi_Radiant_Mission_3.MissionGiver}"/>
												<param name="DestRace" value="{actor.race@Taxi_Radiant_Mission_3.MissionGiver}"/>
												<param name="Lv1Guide" value="{actor@Taxi_Radiant_Mission_3.MissionGiver}"/>
												<param name="PageID" value="3303"/>
												<param name="TextID" value="{value@Taxi_Radiant_Mission_3.MisType}"/>
												<param name="AddText" value="1"/>
												<param name="Difficulty" value="{value@Taxi_Radiant_Mission_3.Difficulty}"/>
												<param name="RewardCr" value="Taxi_Radiant_Mission_3.RewardCr"/>
											</params>
										</cue>
										<cue name="Taxi_Radiant_Mission_3 End" delay="1s">
											<condition>
												<check_value value="{value@Taxi_Radiant_Mission_3.1 L0M03 Progress}" min="1"/>
											</condition>
											<timing>
												<time min="1s" max="3s"/>
											</timing>
											<action>
												<do_all>
													<remove_briefing cue="Taxi_Radiant_Mission_3"/>
													<do_choose>
														<do_when value="{value@Taxi_Radiant_Mission_3.1 L0M03 Progress}" exact="1">
															<remove_objective cue="Taxi_Radiant_Mission_3" status="complete"/>
															<reward_player>
																<money exact="{value@Taxi_Radiant_Mission_3.RewardCr}" transactionpage="9620" transactionid="100036"/>
															</reward_player>
															<increment_statistic statistic="7010"/>
															<show_help text="{9620,100037}"/>
															<start_script script="plugin.guilds.doexp">
																<scriptargs>
																	<scriptvalue datatype="integer" datavalue="{value@Taxi_Radiant_Mission_3.Difficulty}*100"/>
																	<scriptvalue datatype="string" datavalue="taxi"/>
																	<scriptvalue datatype="integer" datavalue="2000"/>
																</scriptargs>
															</start_script>
														</do_when>
														<do_when value="{value@Taxi_Radiant_Mission_3.1 L0M03 Progress}" exact="2" comment="Time ran out">
															<remove_objective cue="Taxi_Radiant_Mission_3" status="failed"/>
														</do_when>
														<do_when value="{value@Taxi_Radiant_Mission_3.1 L0M03 Progress}" exact="3" comment="Destroyed by someone else">
															<start_script script="plugin.guilds.doexp">
																<scriptargs>
																	<scriptvalue datatype="integer" datavalue="-100"/>
																	<scriptvalue datatype="string" datavalue="taxi"/>
																	<scriptvalue datatype="integer" datavalue="2000"/>
																</scriptargs>
															</start_script>
															<remove_objective cue="Taxi_Radiant_Mission_3" status="failed"/>
														</do_when>
														<do_when value="{value@Taxi_Radiant_Mission_3.1 L0M03 Progress}" exact="5" comment="Ejected passenger">
															<remove_objective cue="Taxi_Radiant_Mission_3" status="failed"/>
														</do_when>
														<do_when value="{value@Taxi_Radiant_Mission_3.1 L0M03 Progress}" exact="92" comment="Too late">
															<remove_objective cue="Taxi_Radiant_Mission_3" status="aborted"/>
														</do_when>
														<do_when value="{value@Taxi_Radiant_Mission_3.1 L0M03 Progress}" exact="93" comment="Too late (dest destroyed)">
															<remove_objective cue="Taxi_Radiant_Mission_3" status="aborted"/>
														</do_when>
														<do_otherwise comment="Must be 99, Aborted?">
															<remove_objective cue="Taxi_Radiant_Mission_3" status="aborted"/>
														</do_otherwise>
													</do_choose>
												</do_all>
											</action>
											<cues>
												<cue name="Taxi_Radiant_Mission_3 End Wait">
													<condition>
														<cue_completed cue="Taxi_Radiant_Mission_3 End"/>
													</condition>
													<cues>
														<cue ref="Taxi_Radiant_Mission_3 Final Message">
															<params>
																<param name="Cue" value="Taxi_Radiant_Mission_3"/>
																<param name="ID" value="1"/>
															</params>
														</cue>
													</cues>
												</cue>
											</cues>
										</cue>
										<cue name="Taxi_Radiant_Mission_3 Final Message" library="1" version="2">
											<action>
												<do_all>
													<destroy_actor actor="Taxi_Radiant_Mission_3.MissionGiver"/>
													<set_value name="Taxi_Radiant.Mission" exact="100"/>
												</do_all>
											</action>
										</cue>
									</cues>
								</cue>
							</cues>
						</cue>
						
						<cue name="Taxi_Radiant_Mission_4">
							<condition>
								<check_value value="{value@Taxi_Radiant.Mission}" exact="4"/>
							</condition>
							<timing>
								<time exact="30s"/>
							</timing>
							<action>
								<do_all>
									<do_any>
										<create_actor name="Taxi_Radiant_Mission_4.MissionGiver" race="{lookup.race@argon}" voiceflags="32" location="crew" object="{value@Celestial Navigators.GuildHQ}" chance="30"/>
										<create_actor name="Taxi_Radiant_Mission_4.MissionGiver" race="{lookup.race@boron}" voiceflags="32" location="crew" object="{value@Celestial Navigators.GuildHQ}" chance="10"/>
										<create_actor name="Taxi_Radiant_Mission_4.MissionGiver" race="{lookup.race@split}" voiceflags="32" location="crew" object="{value@Celestial Navigators.GuildHQ}" chance="30"/>
										<create_actor name="Taxi_Radiant_Mission_4.MissionGiver" race="{lookup.race@paranid}" voiceflags="32" location="crew" object="{value@Celestial Navigators.GuildHQ}" chance="20"/>
										<create_actor name="Taxi_Radiant_Mission_4.MissionGiver" race="{lookup.race@teladi}" voiceflags="32" location="crew" object="{value@Celestial Navigators.GuildHQ}" chance="10"/>
									</do_any>
									<set_value name="Taxi_Radiant_Mission_4.PageID" exact="3381"/>
									<set_value name="Taxi_Radiant_Mission_4.TextID" min="181011" max="181011"/>
									<set_value name="Taxi_Radiant_Mission_4.TitleID" min="181001" max="181003"/>
									<set_value name="Taxi_Radiant_Mission_4.BackgroundID" min="181501" max="181506"/>
									<set_value name="Taxi_Radiant_Mission_4.Difficulty" min="{lookup.level@veryeasy}" max="{lookup.level@veryhard}" profile="bell"/>
									<set_value name="Taxi_Radiant_Mission_4.PassengerCount" min="{value@Taxi_Radiant_Mission_4.Difficulty}+2" max="{value@Taxi_Radiant_Mission_4.Difficulty}+3"/>
									<create_offer actor="Taxi_Radiant_Mission_4.MissionGiver" conversation="L2OfferRideHard" discipline="XXXT" cue="Taxi_Radiant_Mission_4"/>
									<do_any>
										<set_value name="Taxi_Radiant_Mission_4.EnemyRace" exact="{lookup.race.randomenemy@{actor.race@Taxi_Radiant_Mission_4.MissionGiver}}" chance="35"/>
										<set_value name="Taxi_Radiant_Mission_4.EnemyRace" exact="0" chance="65"/>
									</do_any>
									<set_value name="axi_Radiant_Mission_4.TimeOut" min="{player.age}+600" max="{player.age}+1200"/>
								</do_all>
							</action>
							<cues>
								<cue name="Taxi_Radiant_4_Breifing">
									<condition>
										<check_any>
											<conversation_completed answer="briefing" conversation="L2OfferRideHard" actor="Taxi_Radiant_Mission_4.MissionGiver"/>
										</check_any>
									</condition>
									<cues>
										<cue ref="L0M81 B" version="2">
											<params>
												<param name="Cue" value="Taxi_Radiant_Mission_4"/>
												<param name="ID" value="1"/>
												<param name="EnemyRace" value="{value@Taxi_Radiant_Mission_4.EnemyRace}"/>
												<param name="OfferRace" value="{actor.race@Taxi_Radiant_Mission_4.MissionGiver}"/>
												<param name="Lv1Guide" value="{actor@Taxi_Radiant_Mission_4.MissionGiver}"/>
												<param name="PassengerCount" value="{value@Taxi_Radiant_Mission_4.PassengerCount}"/>
												<param name="PageID" value="{value@Taxi_Radiant_Mission_4.PageID}"/>
												<param name="TextID" value="{value@Taxi_Radiant_Mission_4.TextID}"/>
												<param name="TitleID" value="{value@Taxi_Radiant_Mission_4.TitleID}"/>
												<param name="BriefingBackground" value="{3381,{value@Taxi_Radiant_Mission_4.BackgroundID}}"/>
												<param name="Difficulty" value="{value@Taxi_Radiant_Mission_4.Difficulty}"/>
												<param name="RewardCr" value="Taxi_Radiant_Mission_4.RewardCr"/>
												<param name="TPNeeded" value="1"/>
											</params>
										</cue>
										<cue name="Taxi_Radiant_4_UpdateBreifing">
											<condition>
												<cue_completed cue="L0M81 B"/>
											</condition>
											<action>
												<do_all>
													<create_briefing cue="Taxi_Radiant_Mission_4" background="taxi_hq.tga" race="{9620,304}" targetrace="{9620,304}" story="{9620,304}">
														<thumbnails>
															<thumbnail image="taxi.tga" order="1"/>
														</thumbnails>
													</create_briefing>
												</do_all>
											</action>
										</cue>
									</cues>
								</cue>
								<cue name="Taxi_Radiant_4_Accept">
									<condition>
										<check_any>
											<conversation_completed answer="accept" conversation="L2OfferRideHard" actor="Taxi_Radiant_Mission_4.MissionGiver"/>
										</check_any>
									</condition>
									<timing>
										<time min="250" max="350"/>
									</timing>
									<action>
										<do_all>
											<remove_offer actor="Taxi_Radiant_Mission_4.MissionGiver" conversation="L2OfferRideHard" discipline="XXXT"/>
											<increment_statistic statistic="7000"/>
										</do_all>
									</action>
									<cues>
										<cue ref="L0M81" comment="Mission 0.1">
											<params>
												<param name="Cue" value="Taxi_Radiant_Mission_4"/>
												<param name="ID" value="1"/>
												<param name="EnemyRace" value="{value@Taxi_Radiant_Mission_4.EnemyRace}"/>
												<param name="OfferRace" value="{actor.race@Taxi_Radiant_Mission_4.MissionGiver}"/>
												<param name="Lv1Guide" value="{actor@Taxi_Radiant_Mission_4.MissionGiver}"/>
												<param name="PassengerCount" value="{value@Taxi_Radiant_Mission_4.PassengerCount}"/>
												<param name="PageID" value="{value@Taxi_Radiant_Mission_4.PageID}"/>
												<param name="TextID" value="{value@Taxi_Radiant_Mission_4.TextID}"/>
												<param name="TitleID" value="{value@Taxi_Radiant_Mission_4.TitleID}"/>
												<param name="BriefingBackground" value="{3381,{value@Taxi_Radiant_Mission_4.BackgroundID}}"/>
												<param name="Difficulty" value="{value@Taxi_Radiant_Mission_4.Difficulty}"/>
												<param name="RewardCr" value="Taxi_Radiant_Mission_4.RewardCr"/>
												<param name="TPNeeded" value="1"/>
											</params>
										</cue>
										<cue name="Taxi_Radiant_Mission_4 End" delay="1s">
											<condition>
												<check_value value="{value@Taxi_Radiant_Mission_4.1 L0M81 Progress}" min="1"/>
											</condition>
											<timing>
												<time min="1s" max="3s"/>
											</timing>
											<action>
												<do_all>
													<remove_briefing cue="Taxi_Radiant_Mission_4"/>
													<do_choose>
														<do_when value="{value@Taxi_Radiant_Mission_4.1 L0M81 Progress}" exact="1">
															<remove_objective cue="Taxi_Radiant_Mission_4" status="complete"/>
															<reward_player>
																<money exact="{value@Taxi_Radiant_Mission_4.RewardCr}" transactionpage="9620" transactionid="100036"/>
															</reward_player>
															<increment_statistic statistic="7010"/>
															<show_help text="{9620,100037}"/>
															<start_script script="plugin.guilds.doexp">
																<scriptargs>
																	<scriptvalue datatype="integer" datavalue="{value@Taxi_Radiant_Mission_4.Difficulty}*200"/>
																	<scriptvalue datatype="string" datavalue="taxi"/>
																	<scriptvalue datatype="integer" datavalue="2000"/>
																</scriptargs>
															</start_script>
														</do_when>
														<do_when value="{value@Taxi_Radiant_Mission_4.1 L0M81 Progress}" exact="2" comment="Time Out">
															<remove_objective cue="Taxi_Radiant_Mission_4" status="failed"/>
															<set_value name="Taxi_Radiant_Mission_4.PassengerPay" exact="({value@Taxi_Radiant_Mission_4.RewardCr}/{value@Taxi_Radiant_Mission_4.PassengerCount})/2"/>
															<set_value name="Taxi_Radiant_Mission_4.PartialPay" exact="{value@Taxi_Radiant_Mission_4.PassengerPay}*{value@Taxi_Radiant_Mission_4.1 Passengers Delivered}"/>
															<reward_player>
																<money exact="{value@Taxi_Radiant_Mission_4.PartialPay}" transactionpage="9620" transactionid="100036"/>
															</reward_player>
															<incoming_message author="{actor.name@Taxi_Radiant_Mission_4.MissionGiver}" text="{3381,181025}"/>
															<start_script script="plugin.guilds.doexp">
																<scriptargs>
																	<scriptvalue datatype="integer" datavalue="{value@Taxi_Radiant_Mission_4.Difficulty}*50"/>
																	<scriptvalue datatype="string" datavalue="taxi"/>
																	<scriptvalue datatype="integer" datavalue="2000"/>
																</scriptargs>
															</start_script>
														</do_when>
														<do_when value="{value@Taxi_Radiant_Mission_4.1 L0M03 Progress}" exact="3" comment="Destroyed by someone else">
															<start_script script="plugin.guilds.doexp">
																<scriptargs>
																	<scriptvalue datatype="integer" datavalue="-100"/>
																	<scriptvalue datatype="string" datavalue="taxi"/>
																	<scriptvalue datatype="integer" datavalue="2000"/>
																</scriptargs>
															</start_script>
															<remove_objective cue="Taxi_Radiant_Mission_4" status="failed"/>
														</do_when>
														<do_when value="{value@Taxi_Radiant_Mission_4.1 L0M03 Progress}" exact="5" comment="Ejected passenger">
															<remove_objective cue="Taxi_Radiant_Mission_4" status="failed"/>
															<incoming_message author="{actor.name@Taxi_Radiant_Mission_4.MissionGiver}" text="{3381,181038}"/>
														</do_when>
														<do_when value="{value@Taxi_Radiant_Mission_4.1 L0M03 Progress}" exact="92" comment="Too late">
															<remove_objective cue="Taxi_Radiant_Mission_4" status="aborted"/>
															<incoming_message author="{actor.name@Taxi_Radiant_Mission_4.MissionGiver}" text="{3381,181025}"/>
														</do_when>
														<do_otherwise comment="Must be 99, Aborted?">
															<remove_objective cue="Taxi_Radiant_Mission_4" status="aborted"/>
															<incoming_message author="{actor.name@Taxi_Radiant_Mission_4.MissionGiver}" text="{3381,181035}"/>
														</do_otherwise>
													</do_choose>
												</do_all>
											</action>
											<cues>
												<cue name="Taxi_Radiant_4 Final End" delay="2s">
													<condition>
														<check_value value="{group.object.count@Taxi_Radiant_Mission_4.1 PassengerGroup}" exact="0"/>
													</condition>
													<timing>
														<time exact="3s"/>
													</timing>
													<action>
														<do_all>
															<destroy_actor actor="Taxi_Radiant_Mission_4.MissionGiver"/>
															<set_value name="Taxi_Radiant.Mission" exact="100"/>
														</do_all>
													</action>
												</cue>
											</cues>
										</cue>
									</cues>
								</cue>
							</cues>
						</cue>

						<cue name="Taxi_Radiant_Reset" comment="Reset radiant missions">
							<condition>
								<check_value value="{value@Taxi_Radiant.Mission}" exact="100"/>
							</condition>
							<timing>
								<time min="30s" max="60s"/>
							</timing>
							<action>
								<do_all>
									<set_value name="{value@Taxi_Radiant.Mission}" exact="0"/>
									<reset_cue cue="Taxi_Radiant"/>
								</do_all>
							</action>
						</cue>
					</cues>
				</cue>
		
				
				<!-- ######################## Joined Event ########################## -->
				<cue name="L3GT01_Joined">
					<condition>
						<check_all>
							<cue_is_complete cue="L3GT01_Accept" negate="1"/>
							<script_event name="guild.joined.taxi"/>
						</check_all>
					</condition>
					<action>
						<do_all>
							<cancel_cue cue="L3GT01"/>
							<set_group_invincible group="L3GT01.GuildObjs" invincible="0"/>
							<do_if value="{actor.exists@L3GT01.MissionGiver}">
								<remove_offer actor="L3GT01.MissionGiver" conversation="L3GT01_1" discipline="XXXXP"/>
								<destroy_actor actor="L3GT01.MissionGiver"/>
							</do_if>
							<set_value name="Celestial Navigators.Joined" exact="1"/>
						</do_all>
					</action>
				</cue>
				
				<cue name="L3GT01_HQ">
					<condition>
						<script_event name="guild.hq.taxi"/>
					</condition>
					<action>
						<do_all>
							<set_value name="Celestial Navigators.GuildHQ" exact="{event.object}"/>
							<reset_cue cue="L3GT01_HQ"/>
						</do_all>
					</action>
				</cue>

				<!-- ######################## Recruitment Mission ########################## -->
				<cue name="L3GT01" comment="Guilds, Taxi, Reqcruitment">
					<condition>
						<check_all>
							<check_value value="{object.exists@{value@Celestial Navigators.GuildHQ}}" exact="1"/>
							<check_value value="{value@Celestial Navigators.Joined}" exact="0"/>
						</check_all>
					</condition>
					<cues>
						<cue name="L3GT01_Start">
							<condition>
								<check_all>
									<check_value value="{player.traderank}" min="2000"/>
									<check_value value="{player.notoriety.boron}" min="1000"/>
								</check_all>
							</condition>
							<action>
								<do_all>
									<add_object_to_group group="L3GT01.GuildObjs" object="{value@Celestial Navigators.GuildHQ}"/>
									<create_actor name="L3GT01.MissionGiver" character="{9620,100034}" race="boron" location="crew" object="{value@Celestial Navigators.GuildHQ}" voice="222" face="202" />
									<create_offer actor="L3GT01.MissionGiver" conversation="L3GT01_1" cue="L3GT01" discipline="XXXXP"/>
								</do_all>
							</action>
							<cues>
								<cue name="L3GT01_MissionGiver Dies" delay="1s">
									<condition>
										<check_value value="{actor.exists@L3GT01.MissionGiver}" exact="0"/>
									</condition>
									<action>
										<do_all>
											<reset_cue cue="L3GT01"/>
										</do_all>
									</action>
								</cue>
								<cue name="L3GT01_Accept">
									<condition>
										<conversation_completed actor="L3GT01.MissionGiver" conversation="L3GT01_1" answer="accept"/>
									</condition>
									<action>
										<do_choose>
											<do_when value="{player.money}" min="10000">
												<reward_player>
													<money exact="-10000" transactionpage="9620" transactionid="100035"/>
												</reward_player>
												<cancel_cue cue="L3GT01_MissionGiver Dies"/>
												<set_group_invincible group="L3GT01.GuildObjs" invincible="1"/>
												<remove_offer actor="L3GT01.MissionGiver" conversation="L3GT01_1" discipline="XXXXP"/>
												<create_offer actor="L3GT01.MissionGiver" conversation="L3GT01_2" cue="L3GT01_Accept" discipline="XXXXP"/>
												<create_briefing cue="L3GT01" story="{9620,100100}" title="{9620,100100}" text="{9620,100101}" background="taxi_hq.tga" race="{9620,304}" targetrace="{9620,304}">
													<mission discipline="XXXXP" level="easy"/>
													<thumbnails>
														<thumbnail image="taxi.tga" order="1"/>
													</thumbnails>
													<objectives>
														<objective step="1">
															<talkto actor="L3GT01.MissionGiver"/>
														</objective>
													</objectives>
												</create_briefing>
												<set_objective cue="L3GT01" story="{9620,100100}" title="{9620,100100}" text="{9620,100101}" noabort="1" race="{9620,304}" targetrace="{9620,304}">
													<briefing cue="L3GT01" step="1"/>
													<mission discipline="XXXXP" level="easy"/>
													<talkto actor="L3GT01.MissionGiver"/>
												</set_objective>
											</do_when>
											<do_otherwise>
												<incoming_message text="{9620,100102}" author="{9620,100034}"/>
												<reset_cue cue="L3GT01_Accept"/>
											</do_otherwise>
										</do_choose>
									</action>
									<cues>
										<cue name="L3GT01_Accept_2">
											<condition>
												<conversation_completed actor="L3GT01.MissionGiver" conversation="L3GT01_2" answer="accept"/>
											</condition>
											<action>
												<do_all>
													<remove_offer actor="L3GT01.MissionGiver" conversation="L3GT01_2" discipline="XXXXP"/>
													<set_actor name="L3GT01.Guide" value="{actor@L3GT01.MissionGiver}"/>
													<set_value name="L3GT01.EnemyRace" exact="{lookup.race@yaki}"/>
												</do_all>
											</action>
											<cues>
												<cue ref="L0GI03 B" version="1">
													<params>
														<param name="Cue" value="L3GT01"/>
														<param name="ID" value="1"/>
														<param name="EnemyRace" value="{value@L3GT01.EnemyRace}"/>
														<param name="OfferRace" value="{actor.race@L3GT01.MissionGiver}"/>
														<param name="DestRace" value="{actor.race@L3GT01.MissionGiver}"/>
														<param name="Lv1Guide" value="{actor@L3GT01.MissionGiver}"/>
														<param name="PageID" value="9620"/>
														<param name="TextID" value="100103"/>
														<param name="Difficulty" value="{lookup.level@hard}"/>
														<param name="RewardCr" value="-1"/>
														<param name="StartObject" value="{value@Celestial Navigators.GuildHQ}"/>
														<param name="HideDest" value="0"/>
														<param name="RoundReward" value="1"/>
														<param name="TPNeeded" value="0"/>
														<param name="HasXenon" value="0"/>
														<param name="IsPlot" value="1"/>
													</params>
												</cue>
												<cue name="L3GT01_UpdateBriefing">
													<condition>
														<check_all>
															<cue_is_complete cue="L0GI03 B"/>
															<check_value value="{actor.exists@L3GT01.1 L0Passenger}" exact="1"/>
														</check_all>
													</condition>
													<action>
														<do_all>
															<create_briefing cue="L3GT01" story="{9620,100100}" title="{9620,100100}" text="{9620,100103}" background="taxi_hq.tga" race="{9620,304}" targetrace="{9620,304}">
																<reward money="0"/>
															</create_briefing>
														</do_all>
													</action>
													<cues>
														<cue ref="L0GI03" version="1">
															<params>
																<param name="Cue" value="L3GT01"/>
																<param name="ID" value="1"/>
																<param name="EnemyRace" value="{value@L3GT01.EnemyRace}"/>
																<param name="OfferRace" value="{actor.race@L3GT01.MissionGiver}"/>
																<param name="DestRace" value="{actor.race@L3GT01.MissionGiver}"/>
																<param name="Lv1Guide" value="{actor@L3GT01.MissionGiver}"/>
																<param name="PageID" value="9620"/>
																<param name="TextID" value="100103"/>
																<param name="Difficulty" value="{lookup.level@hard}"/>
																<param name="RewardCr" value="-1"/>
																<param name="StartObject" value="{value@Celestial Navigators.GuildHQ}"/>
																<param name="HideDest" value="0"/>
																<param name="RoundReward" value="1"/>
																<param name="TPNeeded" value="0"/>
																<param name="HasXenon" value="0"/>
																<param name="IsPlot" value="1"/>
															</params>
														</cue>

														<cue name="L3GT01 End" delay="1s">
															<condition>
																<check_value value="{value@L3GT01.1 L0GI03 Progress}" min="1"/>
															</condition>
															<timing>
																<time min="2s" max="4s"/>
															</timing>
															<action>
																<do_all>
																	<cancel_cue cue="L3GT01_MissionGiver Dies"/>
																	<remove_briefing cue="L3GT01"/>
																	<do_choose>
																		<do_when value="{value@L3GT01.1 L0GI03 Progress}" exact="1">
																			<remove_objective cue="L3GT01" status="complete"/>
																			<set_value name="L3GT01.Completed" exact="1"/>
																		</do_when>
																		<do_when value="{value@L3GT01.1 L0GI03 Progress}" exact="2" comment="Time ran out">
																			<remove_objective cue="L3GT01" status="failed"/>
																			<set_value name="L3GT01.Reset" exact="1"/>
																		</do_when>
																		<do_when value="{value@L3GT01.1 L0GI03 Progress}" exact="3" comment="Destroyed by someone else">
																			<remove_objective cue="L3GT01" status="aborted"/>
																			<set_value name="L3GT01.Reset" exact="1"/>
																		</do_when>
																		<do_when value="{value@L3GT01.1 L0GI03 Progress}" exact="5" comment="Destroyed by someone else">
																			<remove_objective cue="L3GT01" status="failed"/>
																			<set_value name="L3GT01.Reset" exact="1"/>
																		</do_when>
																		<do_when value="{value@L3GT01.1 L0GI03 Progress}" exact="92" comment="Offerer killed">
																			<remove_objective cue="L3GT01" status="aborted"/>
																			<set_value name="L3GT01.Reset" exact="1"/>
																		</do_when>
																		<do_when value="{value@L3GT01.1 L0GI03 Progress}" exact="93" comment="Offerer killed">
																			<remove_objective cue="L3GT01" status="aborted"/>
																			<set_value name="L3GT01.Reset" exact="1"/>
																		</do_when>
																		<do_otherwise comment="Must be 99, Aborted?">
																			<remove_objective cue="L3GT01" status="aborted"/>
																			<set_value name="L3GT01.Reset" exact="1"/>
																		</do_otherwise>
																	</do_choose>
																</do_all>
															</action>
															<cues>
																<cue name="L3GT01_Failed">
																	<condition>
																		<check_value value="{value@L3GT01.Reset}" exact="1"/>
																	</condition>
																	<timing>
																		<time min="120m" max="240m"/>
																	</timing>
																	<action>
																		<do_all>
																			<create_offer actor="L3GT01.MissionGiver" conversation="L3GT01_1" cue="L3GT01" discipline="XXXXP"/>
																			<reset_cue cue="L3GT01_Accept"/>
																			<reset_cue cue="L3GT01_MissionGiver Dies"/>
																		</do_all>
																	</action>
																</cue>
																<cue ref="LUM04">
																	<params>
																		<param name="Duration" value="0"/>
																		<param name="UseTimer" value="0"/>
																		<param name="RewardCr" value="0"/>
																	</params>
																</cue>
																<cue ref="LUM05">
																	<params>
																		<param name="Duration" value="0"/>
																		<param name="UseTimer" value="0"/>
																		<param name="RewardCr" value="0"/>
																	</params>
																</cue>
																<cue name="L3GT01_Return">
																	<condition>
																		<check_all>
																			<check_value value="{value@L3GT01.Completed}" exact="1"/>
																		</check_all>
																	</condition>
																	<timing>
																		<time min="10s" max="15"/>
																	</timing>
																	<action>
																		<do_all>
																			<create_briefing cue="L3GT01" story="{9620,100100}" title="{9620,100100}" text="{9620,100103}" background="taxi_hq.tga" race="{9620,304}" targetrace="{9620,304}">
																				<mission discipline="XXXXP" level="easy"/>
																				<reward money="0"/>
																				<objectives>
																					<objective step="1">
																						<dockat object="{value@Celestial Navigators.GuildHQ}"/>
																					</objective>
																				</objectives>
																			</create_briefing>
																			<set_objective cue="L3GT01" story="{9620,100100}" title="{9620,100100}" text="{9620,100101}" noabort="1" race="{9620,304}" targetrace="{9620,304}">
																				<briefing cue="L3GT01" step="1"/>
																				<mission discipline="XXXXP" level="easy"/>
																				<reward money="0"/>
																				<timer duration="0"/>
																				<dockat object="{value@Celestial Navigators.GuildHQ}"/>
																			</set_objective>
																		</do_all>
																	</action>
																	<cues>
																		<cue name="L3GT01_FinalDocked">
																			<condition>
																				<check_all>
																					<cue_is_complete cue="L3GT01_Return"/>
																					<object_docked param="{value@Celestial Navigators.GuildHQ}"/>
																				</check_all>
																			</condition>																	
																			<action>
																				<do_all>
																					<remove_briefing cue="L3GT01"/>
																					<remove_objective cue="L3GT01" status="complete"/>
																					<destroy_actor actor="L3GT01.MissionGiver"/>
																					<set_group_invincible group="L3GT01.GuildObjs" invincible="0"/>
																					<start_script script="plugin.guilds.recruit">
																						<scriptargs>
																							<scriptvalue datatype="string" datavalue="taxi"/>
																							<scriptvalue datatype="integer" datavalue="1"/>
																							<scriptvalue datatype="integer" datavalue="1"/>
																							<scriptvalue datatype="integer" datavalue="1"/>
																						</scriptargs>
																					</start_script>
																					<set_value name="Celestial Navigators.Joined" exact="1"/>
																					<complete_cue cue="L3GT01"/>
																				</do_all>
																			</action>
																		</cue>
																	</cues>
																</cue>
															</cues>
														</cue>
													</cues>
												</cue>
											</cues>
										</cue>
									</cues>
								</cue>
							</cues>
						</cue>
					</cues>
				</cue>
				
				<!-- ######################## Progression Mission 1 ########################## -->
				<!--
				<cue name="L3GA02" comment="Guilds, Assassin Hunters, Progression 1">
					<condition>
						<script_event name="guild.assassin.level"/>
					</condition>
					<action>
						<do_all>
							<do_choose>
								<do_when value="{event.param}" exact="4">
									<set_value name="L3GA02 Mission" exact="1"/>
								</do_when>
								<do_otherwise>
									<reset_cue cue="L3GA02"/>
								</do_otherwise>
							</do_choose>
						</do_all>
					</action>
					<cues>
						<cue name="L3GA02 Start">
							<condition>
								<check_all>
									<check_value value="{value@L3GA02 Mission}" exact="1"/>
								</check_all>
							</condition>
							<timing>
								<time min="300s" max="420s"/>
							</timing>
							<action>
								<do_all>
									<set_value name="L3GA02 Mission" exact="2"/>
									<incoming_message text="{9620,1132}" author="{9620,1120}"/>
								</do_all>
							</action>							
						</cue>
					</cues>
				</cue>
				-->

				<!-- ######################## Progression Mission 2 ########################## -->
				<!--
				<cue name="L3GA03" comment="Guilds, Assassins, Progression 2">
					<condition>
						<script_event name="guild.assassin.level"/>
					</condition>
					<action>
						<do_all>
							<do_choose>
								<do_when value="{event.param}" exact="7">
									<set_value name="L3GA03 Mission" exact="1"/>
								</do_when>
								<do_otherwise>
									<reset_cue cue="L3GA03"/>
								</do_otherwise>
							</do_choose>
						</do_all>						
					</action>
					<cues>
						<cue name="L3GA03 Start">
							<condition>
								<check_all>
									<cue_is_complete cue="L3GA02"/>
									<check_value value="{value@L3GA02 Mission}" exact="100"/>
									<check_value value="{value@L3GA03 Mission}" exact="1"/>
								</check_all>
							</condition>
							<action>
								<do_all>
									<incoming_message text="Starting 2nd assassins guild quest"/>
									
								</do_all>
							</action>
						</cue>
					</cues>
				</cue>
				-->
				
				<!-- ######################## Endgame Mission ########################## -->
				<!--
				<cue name="L3GA04" comment="Guilds, Assassins, Endgame Mission">
					<condition>
						<script_event name="guild.assassin.level"/>
					</condition>
					<action>
						<do_all>
							<do_choose>
								<do_when value="{event.param}" exact="10">
									<set_value name="L3GA04 Mission" exact="1"/>
								</do_when>
								<do_otherwise>
									<reset_cue cue="L3GA04"/>
								</do_otherwise>
							</do_choose>
						</do_all>
					</action>
					<cues>
						<cue name="L3GA04 Start">
							<condition>
								<check_all>
									<check_value value="{value@L3GA02 Mission}" exact="100"/>
									<check_value value="{value@L3GA03 Mission}" exact="100"/>
									<check_value value="{value@L3GA04 Mission}" exact="1"/>
								</check_all>
							</condition>
							<action>
								<incoming_message text="Starting Assassins guild final quest"/>
							</action>							
						</cue>
					</cues>
				</cue>
				-->
			</cues>
		</cue>
	</cues>
</director>
